# ============================================
# KGC COMPLIANCE CLOUD - ENVIRONMENT VARIABLES
# ============================================
# Copy this file to .env.local for local development
# Copy this file to .env.production for production deployment
# NEVER commit .env.local or .env.production to git!

# ============================================
# DATABASE
# ============================================
# PostgreSQL connection string
# For Docker: use "postgres" as hostname
# For local: use "localhost"
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/kgc_compliance_cloud?schema=public"

# ============================================
# NEXTAUTH - AUTHENTICATION
# ============================================
# The URL where your application is hosted
NEXTAUTH_URL="http://localhost:3000"

# Secret key for NextAuth session encryption
# IMPORTANT: Generate a new secret for production using:
#   openssl rand -base64 32
# CRITICAL: NEVER use the default value in production!
NEXTAUTH_SECRET="CHANGE_THIS_TO_A_SECURE_RANDOM_STRING_min_32_characters_long"

# ============================================
# REDIS - CACHING & QUEUE
# ============================================
# Redis connection for job queue
# For Docker: use "redis" as hostname
# For local: use "localhost"
REDIS_HOST="redis"
REDIS_PORT="6379"
REDIS_PASSWORD=""

# Alternative Redis URL format (if your code uses this instead)
REDIS_URL="redis://redis:6379"
KV_URL="redis://redis:6379"

# ============================================
# MINIO - S3-COMPATIBLE OBJECT STORAGE
# ============================================
# MinIO server endpoint (hostname only, no protocol)
# For Docker: use "minio"
# For local: use "localhost"
MINIO_ENDPOINT="minio"

# MinIO server port
MINIO_PORT="9000"

# MinIO root/admin credentials
# IMPORTANT: Change these for production!
#   Generate: openssl rand -hex 16
MINIO_ROOT_USER="minioadmin"
MINIO_ROOT_PASSWORD="minioadmin"

# MinIO access credentials (can be same as root credentials for single-tenant)
MINIO_ACCESS_KEY="minioadmin"
MINIO_SECRET_KEY="minioadmin"

# Whether to use SSL/TLS for MinIO connections
MINIO_USE_SSL="false"

# AWS region (required by S3 SDK even for MinIO)
MINIO_REGION="us-east-1"

# Default bucket name for document storage
# Note: Tenant-isolated bucket naming is automatic (tenant-{id}-documents)
MINIO_BUCKET_NAME="documents"

# ============================================
# EMAIL - SMTP CONFIGURATION
# ============================================
# SMTP server configuration
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_SECURE="false"

# SMTP authentication credentials
# For Gmail: Use an App Password, not your regular password
# Generate at: https://myaccount.google.com/apppasswords
SMTP_USER="your-email@gmail.com"
SMTP_PASSWORD="your-gmail-app-password"

# From address for outgoing emails
SMTP_FROM="KGC Compliance Cloud <noreply@kgc-compliance.com>"

# ============================================
# APPLICATION SETTINGS
# ============================================
# Node environment: "development", "production", or "test"
NODE_ENV="development"

# Application name (shown in UI)
APP_NAME="KGC Compliance Cloud"

# Public URL for the application (used in emails, webhooks, etc.)
APP_URL="http://localhost:3000"

# ============================================
# FEATURE FLAGS
# ============================================
# Enable/disable features for development or testing
ENABLE_BACKGROUND_JOBS="true"
ENABLE_EMAIL_NOTIFICATIONS="true"
ENABLE_OCR_PROCESSING="false"
ENABLE_AI_SUMMARIES="false"

# ============================================
# OCR - OPTICAL CHARACTER RECOGNITION
# ============================================
# OCR provider: "tesseract", "google-vision", "aws-textract", or "none"
OCR_PROVIDER="none"

# Google Cloud Vision API key (if using google-vision)
# GOOGLE_CLOUD_API_KEY=""

# AWS credentials (if using aws-textract)
# AWS_ACCESS_KEY_ID=""
# AWS_SECRET_ACCESS_KEY=""
# AWS_REGION="us-east-1"

# ============================================
# OPENAI - AI FEATURES (OPTIONAL)
# ============================================
# OpenAI API key for AI-powered features
# Leave empty to disable AI features
OPENAI_API_KEY=""

# ============================================
# WHATSAPP - NOTIFICATIONS (OPTIONAL)
# ============================================
# WhatsApp Business API integration
WHATSAPP_API_KEY="none"
WHATSAPP_PHONE_NUMBER="none"

# ============================================
# SENTRY - ERROR TRACKING (OPTIONAL)
# ============================================
# Sentry DSN for error tracking
# Leave as "none" to disable
SENTRY_DSN="none"

# ============================================
# NEXT.JS SETTINGS
# ============================================
# Disable Next.js telemetry
NEXT_TELEMETRY_DISABLED=1

# ============================================
# PRODUCTION-SPECIFIC SETTINGS
# ============================================
# Uncomment and configure for production deployments:

# Session cookie settings
# NEXTAUTH_COOKIE_SECURE="true"
# NEXTAUTH_COOKIE_HTTPONLY="true"
# NEXTAUTH_COOKIE_SAMESITE="lax"

# Rate limiting
# RATE_LIMIT_MAX_REQUESTS="100"
# RATE_LIMIT_WINDOW_MS="60000"

# Logging level: "debug", "info", "warn", "error"
# LOG_LEVEL="info"

# ============================================
# DOCKER-SPECIFIC OVERRIDES
# ============================================
# When running with docker-compose, use these values instead:
#
# DATABASE_URL="postgresql://postgres:postgres@postgres:5432/kgc_compliance_cloud?schema=public"
# REDIS_HOST="redis"
# REDIS_URL="redis://redis:6379"
# KV_URL="redis://redis:6379"
# MINIO_ENDPOINT="minio"

# ============================================
# SECURITY CHECKLIST FOR PRODUCTION
# ============================================
# Before deploying to production, ensure you:
#
# [ ] Generate new NEXTAUTH_SECRET: openssl rand -base64 32
# [ ] Change all MINIO credentials (root user/password, access/secret keys)
# [ ] Use strong, unique passwords for all services
# [ ] Set NEXTAUTH_URL to your production domain (https://...)
# [ ] Enable secure cookies: NEXTAUTH_COOKIE_SECURE="true"
# [ ] Configure Sentry or error tracking service
# [ ] Set up proper CORS and CSP headers
# [ ] Enable rate limiting
# [ ] Use environment-specific files (.env.production)
# [ ] Store secrets in a secrets manager (AWS Secrets Manager, Vault, etc.)
# [ ] Never commit .env files to version control
# [ ] Rotate secrets regularly (quarterly at minimum)
# [ ] Enable SSL/TLS for MinIO in production
# [ ] Use managed PostgreSQL service (RDS, Cloud SQL, etc.)
# [ ] Set up database backups
# [ ] Configure firewall rules and VPC
# [ ] Enable audit logging
# [ ] Set up monitoring and alerts
